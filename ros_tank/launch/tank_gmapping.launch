<launch>
    <!-- Namespace   -->
    <arg name="namespace" default="ros_tank"/>
    
    <!-- launch nodes in namespace -->
    <group ns="$(arg namespace)">

        <!-- Run lidar A1 -->
        <node name="rplidarNode" pkg="rplidar_ros" type="rplidarNode" output="screen">
            <param name="serial_port" type="string" value="/dev/ttyUSB0"/>
            <param name="serial_baudrate" type="int" value="115200"/>
            <param name="frame_id" type="string" value="map"/>
            <param name="inverted" type="bool" value="false"/>
            <param name="angle_compensate" type="bool" value="true"/>
        </node>

        <!-- Defining args for slam_gmapping node -->
        <arg name="scan_topic" default="/ros_tank/scan" />
        <arg name="base_frame" default="base_link"/>
        <arg name="odom_frame" default="base_link"/>

        <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
            <rosparam file="$(find ros_tank)/config/gmapping_params.yaml" command="load" />

            <param name="base_frame" value="$(arg base_frame)"/>
            <param name="odom_frame" value="$(arg odom_frame)"/>
            <remap from="scan" to="$(arg scan_topic)"/>
        </node> 

        <!-- Run teleop twist keyboard -->
        <node name="teleop_twist_keyboard" pkg="teleop_twist_keyboard" type="teleop_twist_keyboard.py"/>

        <!-- Show in Rviz -->
        <node name="rviz" pkg="rviz" type="rviz" required="true" args="-d $(find ros_tank)/rviz/gmapping.rviz"/>

    </group>
</launch>